version: 1.0
name: sync-app-apb
description: Installs the Aerogear Sync Application
bindable: True
async: optional
tags:
  - mobile-service
  - mobile-client-enabled
metadata:
  displayName: Sync App
  console.openshift.io/iconClass: fa fa-refresh
  #documentationUrl: "https://docs.aerogear.org/aerogear/latest/data-sync/"
  providerDisplayName: "Red Hat, Inc."
  serviceName: sync-app
plans:
  - name: default
    description: This plan sets up the Sync Application
    free: True
    metadata: 
      mobileclient_bind_parameters_data:
        - '{}'
    parameters:
      - name: SYNC_APP_NAME
        description: The name of your sync application.
        type: string
        pattern: "^[a-z][a-z0-9-]*[a-z0-9]$"
        required: True
        title: Sync Application Name
      - name: SYNC_APP_DOCKER_IMAGE
        description: URL of your GraphQL Server Docker Image, e.g. docker.io/aerogear/voyager-server-example-task
        type: string
        required: True
        title: Sync Application Docker image
      - name: SYNC_APP_DOCKER_IMAGE_VERSION
        description: (default value: 'latest') Version of your Sync Application Docker Image
        type: string
        required: False
        title: Sync Application Docker image version
        default: 'latest'
      - name: SYNC_APP_HEALTH_ENDPOINT
        description: (default value: '/') Health Endpoint of your Sync Application. Use 'health' for docker.io/aerogear/voyager-server-example-task image.
        type: string
        required: False
        title: Sync Application health endpoint
      - name: SYNC_APP_METRICS_ENDPOINT
        description: (default value: '/metrics') Metrics endpoint of your Sync Application
        type: string
        required: False
        title: Sync Application metrics endpoint
        default: 'metrics'
      - name: SYNC_APP_PORT
        description: Port of the Sync Application to Expose. Use '4000' for docker.io/aerogear/voyager-server-example-task image.
        type: number
        required: True
        title: Sync App Port
      - name: SYNC_APP_GRAPHQL_ENDPOINT
        description: (default value: 'graphql') GraphQL Endpoint of your Sync Application 
        type: string
        required: False
        title: Sync App GraphQL Endpoint
      - name: DB_HOSTNAME
        description: Hostname of the Database Server
        type: string
        required: True
        title: Database Server Hostname
      - name: DB_PORT
        description: Port of the Database Server
        type: number
        required: True
        title: Database Server Port
      - name: DB_USERNAME
        description: Username that will be used to connect to Database
        type: string
        required: True
        title: Database Server Username
      - name: DB_PASSWORD
        description: Password that will be used to connect to Database
        type: string
        required: True
        title: Database Server Password
      - name: DB_NAME
        description: Name of the Database
        type: string
        required: True
        title: Database name
      - name: DB_SSL
        description: Use SSL connection to the Database Server
        type: boolean
        display_type: checkbox
        default: false
        title: Use SSL?
    bind_parameters:
      - name: CLIENT_ID
        required: True
        title: Mobile Client ID
        type: string
        
